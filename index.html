<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#0a0f18" />
  <title>文学史知識マスター</title>
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <!-- ===== Start Screen（ここだけ表示 → START後に app.js が remove） ===== -->
  <div id="startScreen" class="panel">
    <h1>文学史知識マスター<br><span style="font-size:14px;opacity:.9;">ONLINE</span></h1>

    <div style="display:flex;flex-direction:column;gap:10px;margin-top:10px;">
      <button id="modeNormalBtn" class="ctrl" type="button">
        通常10問<br><span style="font-size:12px;opacity:.85;">10 QUESTIONS / QUICK</span>
      </button>

      <button id="modeEndlessBtn" class="ctrl" type="button">
        連続学習<br><span style="font-size:12px;opacity:.85;">ENDLESS / FOCUS</span>
      </button>

      <button id="openCollectionBtn" class="ctrl" type="button">
        図鑑<br><span style="font-size:12px;opacity:.85;">COLLECTION / CARDS</span>
      </button>

      <button id="startBtn" class="ctrl" type="button" style="margin-top:6px;">
        START
      </button>

      <div id="startNote" style="opacity:.85;font-size:12px;">
        BGMは開始後にONにできます。
      </div>
    </div>
  </div>

  <!-- ===== Main UI（kobun-quiz 準拠） ===== -->
  <div id="quiz" class="panel" aria-live="polite">
    <h1>文学史知識マスター</h1>

    <div id="meta">
      <div id="metaLeft">
        <div id="modePill" class="mode-pill">通常（10問）</div>
        <div id="progress">読み込み中…</div>
        <div id="score">Score: 0</div>
        <div id="comboLabel">最大COMBO x0</div>
      </div>

      <div id="metaRight">
        <button id="bgmToggle" type="button">BGM: OFF</button>
      </div>
    </div>

    <div id="meterArea">
      <div class="meter"><div id="meterInner"></div></div>
      <div class="meter-row">
        <div id="meterLabel">進捗 0/0</div>
        <div style="opacity:.9;"> </div>
      </div>
      <!-- timer-wrap は app.js が自動挿入 -->
    </div>

    <div id="question">CSVを読み込んでいます。</div>
    <div id="subline"></div>

    <div class="choices">
      <button class="choice" data-idx="0" type="button">読み込み中…</button>
      <button class="choice" data-idx="1" type="button">---</button>
      <button class="choice" data-idx="2" type="button">---</button>
      <button class="choice" data-idx="3" type="button">---</button>
    </div>

    <div id="status"></div>

    <div class="controls">
      <button id="nextBtn" class="ctrl" type="button" disabled>次へ</button>
      <button id="restartBtn" class="ctrl" type="button">最初から</button>
    </div>
  </div>

  <!-- csv.js → app.js の順（csvFetch / CSVUtil 未定義を防ぐ） -->
  <script src="./csv.js"></script>
  <script src="./app.js"></script>
</body>
</html>
